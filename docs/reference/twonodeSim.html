<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Two Node Process Data Simulation — twonodeSim • BayesMassBal</title>

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Two Node Process Data Simulation — twonodeSim" />

<meta property="og:description" content="Simulates data for a stochastic two node, two component process at steady state.  Location indicies are the same as what is shown in vignette(&quot;Two_Node_Process&quot;, package = &quot;BayesMassBal&quot;).  Default parameters are used in an upcomming publication." />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">BayesMassBal</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/Two_Node_Process.html">Two Node Process Example</a>
    </li>
  </ul>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/skoermer/BayesMassBal">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Two Node Process Data Simulation</h1>
    <small class="dont-index">Source: <a href='https://github.com/skoermer/BayesMassBal/blob/master/R/twonode_data_sim.R'><code>R/twonode_data_sim.R</code></a></small>
    <div class="hidden name"><code>twonodeSim.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>Simulates data for a stochastic two node, two component process at steady state.  Location indicies are the same as what is shown in <code><a href='../articles/Two_Node_Process.html'>vignette("Two_Node_Process", package = "BayesMassBal")</a></code>.  Default parameters are used in an upcomming publication.</p>
    
    </div>

    <pre class="usage"><span class='fu'>twonodeSim</span>(<span class='kw'>k</span> <span class='kw'>=</span> <span class='fl'>7</span>, <span class='kw'>feed</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/list'>list</a></span>(<span class='kw'>rate</span> <span class='kw'>=</span> <span class='fl'>100</span>, <span class='kw'>sd</span> <span class='kw'>=</span> <span class='fl'>6</span>, <span class='kw'>CuFeS2grade</span> <span class='kw'>=</span> <span class='fl'>1.2</span>),
  <span class='kw'>rec</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/list'>list</a></span>(<span class='kw'>CuFeS2</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/list'>list</a></span>(<span class='kw'>mean</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='fl'>98</span>, <span class='fl'>95</span>)/<span class='fl'>100</span>, <span class='kw'>var</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='fl'>5e-05</span>, <span class='fl'>8e-05</span>)),
  <span class='kw'>gangue</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/list'>list</a></span>(<span class='kw'>mean</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='fl'>7</span>, <span class='fl'>4</span>)/<span class='fl'>100</span>, <span class='kw'>var</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='fl'>5e-05</span>, <span class='fl'>2.5e-05</span>))),
  <span class='kw'>assayNoise</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/list'>list</a></span>(<span class='kw'>CuFeS2</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='fl'>0.15</span>, <span class='fl'>0.2</span>, <span class='fl'>0.05</span>, <span class='fl'>5e-05</span>, <span class='fl'>0.005</span>), <span class='kw'>gangue</span> <span class='kw'>=</span>
  <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='fl'>5</span>, <span class='fl'>1</span>, <span class='fl'>0.03</span>, <span class='fl'>2</span>, <span class='fl'>0.5</span>)), <span class='kw'>truncation</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>k</th>
      <td><p>Numeric specifying the number of sample sets to be simulated.</p></td>
    </tr>
    <tr>
      <th>feed</th>
      <td><p>List specifying qualities for the process grade.  See default for required structure.  <code>rate</code> is the mean feed rate.  <code>sd</code> is the standard deviation of the feed rate, see details.  <code>CuFeS2grade</code> is the mass percent CuFeS2 present in the feed.  Grade is not stochastic.</p></td>
    </tr>
    <tr>
      <th>rec</th>
      <td><p>List specifying mean and variance in process performance.  See default for required structure. <code>rec$*component*$mean</code> is a vector giving mean fractional recovery of the given component for <code><a href='https://www.rdocumentation.org/packages/base/topics/c'>c(node1,node2)</a></code>.  <code>rec$*component*$var</code> gives the variance in the process in a similar manner.  See details.</p></td>
    </tr>
    <tr>
      <th>assayNoise</th>
      <td><p>List specifying standard deviations of random noise added to simulated process outputs.  See default for required structure.  The index of a vector within the list is equivalent to the index of the sampling location.  See Details section.</p></td>
    </tr>
    <tr>
      <th>truncation</th>
      <td><p>Logical indicating if the simulation should be rerun, and previous results discgarded, until no observed values are less than 0. Default is TRUE.  See details for more information.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>Returns a list of simulated data and expected values.  List members are as follows:</p>
<dt><code>simulation</code></dt><dd><p>List of matricies giving simulated data.  <code>twonodeSim()$simulation</code> is structured so that it can directly be passed to the <code><a href='BMB.html'>BMB</a></code> function as the <code>y</code> argument.</p></dd>

<dt><code>expectations</code></dt><dd><p>List of matricies giving expected values of the mass flow rate for each component at every location.  See the Details section for information about instances that may create reliability issues with this output.</p></dd>

    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Each of the <code>k</code> data sets collected from the <code>twonodeSim()</code> simulation is independent and identically distributed.</p>
<p>The feed rate to the process is normally distributed with a mean of <code>feed$rate</code>, and a standard deviation of <code>feed$sd</code>.  If the feed rate is sufficiently small, and the standard deviation is sufficiently large, negative feed rates can be generated.</p>
<p>Process recovery at each node is simulated from a <a href='https://en.wikipedia.org/wiki/Beta_distribution'>beta distribution</a>, reparameterized as shown in <a href='https://stats.stackexchange.com/a/12239'>this post</a> to make parameter specification more intiutive.  This reparameterization is only valid when \(\sigma^2 \leq \mu(1-\mu)\), and the list argument <code>rec</code> must be specified as such.</p>
<p>The simulation draws a random feed rate, draws random values for recovery, then performs process engineering calculations with these values to find mass flow rates at each sampling location for both sample components.  To these flow rates, random normally distributed noise is added, with a mean of zero and standard deviations specified in <code>assayNoise</code>.  If the standard deviations supplied are sufficiently large, the simulation can return negative mass flow rates.</p>
<p>The argument <code>truncation = TRUE</code> discgards negative mass flow rates, and reruns the simulation untill all values are non-negative.  For some combinations of a large <code>k</code> and specifications in <code>feed</code> and <code>assayNoise</code>, this can happen frequently.  If if the simulation is run three or more times a warning will be printed that the returned expectations are unreliable.  If this is the case, expectations should be calculated using analytical or monte-carlo methods outside of the abilities of this function.  For the default parameters, can occur, but is rare.  The default parameters were chosen in a way that makes a tuncation warning highly unlikely.</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
<span class='no'>y</span> <span class='kw'>&lt;-</span> <span class='fu'>twonodeSim</span>()$<span class='no'>simulation</span>

<span class='co'># Then the BMB function can be run as</span>
<span class='co'># BMB(y = y, ...)</span></div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Scott Koermer.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
   </div>

  

  </body>
</html>

